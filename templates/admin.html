<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>Out of the Abyss - Map with Drawing Tools</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <script>window.admin_mode=1</script>
</head>
<body>

<!-- Панель навигации по вкладкам -->
<div class="tab-buttons">
    <button class="tab-button active" onclick="showTab('map')">Карта</button>
    <button class="tab-button" onclick="showTab('ambience-tab')">Амбиенс</button>
    <button class="tab-button" onclick="showTab('initiative-tab')">Инициатива</button>
    <button class="tab-button" onclick="showTab('dm-tab')">Для заметок</button>
    <button class="tab-button" onclick="showTab('monster-tab')">Зоны</button>
</div>

<!-- Контейнеры для содержимого каждой вкладки -->

<div id="map" class="tab-content active">

</div>
    <!-- Кнопки для карты -->
<div id="map-controls" class="tab-content active">
    <button id="draw-button">Draw Polygon</button>
    <button id="reverse-button">Reverse Button</button>
</div>
<div id="ambience-tab" class="tab-content">
    <h2>Амбиенс</h2>
    <p>Здесь можно настроить амбиенс, выбрать звуковое сопровождение и эффекты для карты.</p>
    <div id="ambience-tab-content"></div>
</div>
<div id="initiative-tab" class="tab-content">
    <h2>Инициатива</h2>
    <p>Таблица инициативы для отслеживания очереди ходов персонажей.</p>
    <div class="container"><!-- Информационные блоки --><div class="info-block">
        <span>Текущий раунд: <span id="current-round"></span></span>
        <span>Ходит: <span id="current-turn"></span></span>
        <span>Далее: <span id="next-turn"></span></span>
        <span>Сложность боя: <span id="battle-rating"></span></span>
    </div>
        <button class="toggle-form-button reset" onclick="resetInitiative()">Сброс</button><button class="toggle-form-button next" >Дальше</button><button class="toggle-form-button prev">Назад</button><!-- Контейнер для персонажей --><div id="characters-container"></div><!-- Кнопка открытия формы добавления персонажа --><button class="toggle-form-button add">Добавить персонажа</button><input type="text" id="npc-input" placeholder="Type to search NPCs..."><ul id="npc-list"></ul>
        <script></script>
        <!-- Форма добавления нового персонажа --><div class="add-character-form" id="add-character-form"><label>Init: <input type="text" id="new-init"></label><label>Имя: <input type="text" id="new-name"></label><label>КД: <input type="text" id="new-cd"></label><label>HP: <input type="text" id="new-hp-now"> / <input type="text" id="new-hp-max"></label><label>SUR: <input type="checkbox" id="new-surprise"></label><label>НПС: <input type="checkbox" id="new-npc" /></label><label>Опасность: <input type="text" id="new-experience" /></label><button id="add-character-button">Добавить</button></div>
    </div>
</div>
<div id="dm-tab" class="tab-content">
    <h2>Заметки</h2>
    <textarea  id="dynamic-text" style="width: 800px;height:50%"></textarea>
</div>
<div id="monster-tab" class="tab-content">
    <h2>Заметки</h2>
</div>
<script src="https://unpkg.com/@turf/turf"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
<script type="module" src="{{ url_for('static', filename='js/script.js') }}" async defer></script>
<script src="{{ url_for('static', filename='js/tabs.js') }}" async defer></script>
<script type="module" src="{{ url_for('static', filename='js/init.js') }}" async defer></script>
<script src="{{ url_for('static', filename='js/textarea.js') }}" async defer></script>
<script src="{{ url_for('static', filename='js/ambience.js') }}" async defer></script>
<script type="module" src="{{ url_for('static', filename='js/test/init.js') }}" async defer></script>

</body>
</html>
